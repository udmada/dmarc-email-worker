# Generated from Workflow.pkl. DO NOT EDIT.
name: Deploy to Cloudflare
"on":
  pull_request:
    paths:
      - src/**
      - package.json
      - pnpm-lock.yaml
      - wrangler.toml
      - tsconfig.json
      - mise.toml
  push:
    paths:
      - src/**
      - package.json
      - pnpm-lock.yaml
      - wrangler.toml
      - tsconfig.json
      - mise.toml
env:
  CLOUDFLARE_API_TOKEN: ${{ secrets.CLOUDFLARE_API_TOKEN }}
  CLOUDFLARE_ACCOUNT_ID: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
jobs:
  deploy:
    runs-on: ubuntu-slim
    environment:
      name: production
    steps:
      - uses: actions/checkout@v4
      - uses: jdx/mise-action@v2
      - name: Install dependencies
        run: mise run install
      - name: Run checks
        run: mise run test
      - name: Deploy to Cloudflare Workers
        if: github.event_name == 'push'
        run: mise run deploy
